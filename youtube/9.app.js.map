{"version":3,"sources":["webpack:///./src/players/Twitch.js"],"names":["Twitch","callPlayer","props","config","playerId","randomString","this","onMount","url","isReady","playsinline","onError","controls","isChannel","MATCH_URL_TWITCH_CHANNEL","test","id","match","MATCH_URL_TWITCH_VIDEO","player","setChannel","setVideo","getSDK","then","Player","playerID","video","channel","height","width","autoplay","playing","muted","time","parseStartTime","options","READY","PLAYING","PAUSE","ENDED","ONLINE","OFFLINE","SEEK","addEventListener","onReady","onPlay","onPause","onEnded","onSeek","onLoaded","seconds","fraction","style","Component","canPlay","twitch"],"mappings":"47DAKA,IAIqBA,E,0dAINC,K,kBACF,EAAKC,MAAMC,OAAOC,UAAlB,UAPY,kBAOZ,OAAoDC,gB,eAiExD,WACL,EAAKJ,WAAW,YAAY,M,iBAGrB,WACP,EAAKA,WAAW,YAAY,M,gDApE9B,WACEK,KAAKJ,MAAMK,SAAWD,KAAKJ,MAAMK,QAAQD,Q,kBAG3C,SAAME,EAAKC,GAAS,WAClB,EAAmDH,KAAKJ,MAAhDQ,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,QAASR,EAA9B,EAA8BA,OAAQS,EAAtC,EAAsCA,SAChCC,EAAYC,IAAyBC,KAAKP,GAC1CQ,EAAKH,EAAYL,EAAIS,MAAMH,KAA0B,GAAKN,EAAIS,MAAMC,KAAwB,GAC9FT,EACEI,EACFP,KAAKa,OAAOC,WAAWJ,GAEvBV,KAAKa,OAAOE,SAAS,IAAML,GAI/BM,YA3BY,0CACG,UA0BaC,MAAK,SAAAvB,GAC/B,EAAKmB,OAAS,IAAInB,EAAOwB,OAAO,EAAKC,S,+VAAvB,EACZC,MAAOb,EAAY,GAAKG,EACxBW,QAASd,EAAYG,EAAK,GAC1BY,OAAQ,OACRC,MAAO,OACPnB,YAAaA,EACboB,SAAU,EAAK5B,MAAM6B,QACrBC,MAAO,EAAK9B,MAAM8B,MAElBpB,WAAUC,GAAmBD,EAC7BqB,KAAMC,YAAe1B,IAClBL,EAAOgC,UAEZ,MAAgEnC,EAAOwB,OAA/DY,EAAR,EAAQA,MAAOC,EAAf,EAAeA,QAASC,EAAxB,EAAwBA,MAAOC,EAA/B,EAA+BA,MAAOC,EAAtC,EAAsCA,OAAQC,EAA9C,EAA8CA,QAASC,EAAvD,EAAuDA,KACvD,EAAKvB,OAAOwB,iBAAiBP,EAAO,EAAKlC,MAAM0C,SAC/C,EAAKzB,OAAOwB,iBAAiBN,EAAS,EAAKnC,MAAM2C,QACjD,EAAK1B,OAAOwB,iBAAiBL,EAAO,EAAKpC,MAAM4C,SAC/C,EAAK3B,OAAOwB,iBAAiBJ,EAAO,EAAKrC,MAAM6C,SAC/C,EAAK5B,OAAOwB,iBAAiBD,EAAM,EAAKxC,MAAM8C,QAG9C,EAAK7B,OAAOwB,iBAAiBH,EAAQ,EAAKtC,MAAM+C,UAChD,EAAK9B,OAAOwB,iBAAiBF,EAAS,EAAKvC,MAAM+C,YAChDtC,K,kBAGL,WACEL,KAAKL,WAAW,U,mBAGlB,WACEK,KAAKL,WAAW,W,kBAGlB,WACEK,KAAKL,WAAW,W,oBAGlB,SAAQiD,GACN5C,KAAKL,WAAW,OAAQiD,K,uBAG1B,SAAWC,GACT7C,KAAKL,WAAW,YAAakD,K,yBAW/B,WACE,OAAO7C,KAAKL,WAAW,iB,4BAGzB,WACE,OAAOK,KAAKL,WAAW,oB,8BAGzB,WACE,OAAO,O,oBAGT,WAKE,OACE,yBAAKmD,MALO,CACZvB,MAAO,OACPD,OAAQ,QAGWZ,GAAIV,KAAKmB,gB,iFAhGE4B,a,EAAfrD,E,cACE,U,EADFA,E,UAEFsD,IAAQC,Q,EAFNvD,E,eAGE","file":"9.app.js","sourcesContent":["import React, { Component } from 'react'\n\nimport { callPlayer, getSDK, parseStartTime, randomString } from '../utils'\nimport { canPlay, MATCH_URL_TWITCH_CHANNEL, MATCH_URL_TWITCH_VIDEO } from '../patterns'\n\nconst SDK_URL = 'https://player.twitch.tv/js/embed/v1.js'\nconst SDK_GLOBAL = 'Twitch'\nconst PLAYER_ID_PREFIX = 'twitch-player-'\n\nexport default class Twitch extends Component {\n  static displayName = 'Twitch'\n  static canPlay = canPlay.twitch\n  static loopOnEnded = true\n  callPlayer = callPlayer\n  playerID = this.props.config.playerId || `${PLAYER_ID_PREFIX}${randomString()}`\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url, isReady) {\n    const { playsinline, onError, config, controls } = this.props\n    const isChannel = MATCH_URL_TWITCH_CHANNEL.test(url)\n    const id = isChannel ? url.match(MATCH_URL_TWITCH_CHANNEL)[1] : url.match(MATCH_URL_TWITCH_VIDEO)[1]\n    if (isReady) {\n      if (isChannel) {\n        this.player.setChannel(id)\n      } else {\n        this.player.setVideo('v' + id)\n      }\n      return\n    }\n    getSDK(SDK_URL, SDK_GLOBAL).then(Twitch => {\n      this.player = new Twitch.Player(this.playerID, {\n        video: isChannel ? '' : id,\n        channel: isChannel ? id : '',\n        height: '100%',\n        width: '100%',\n        playsinline: playsinline,\n        autoplay: this.props.playing,\n        muted: this.props.muted,\n        // https://github.com/CookPete/react-player/issues/733#issuecomment-549085859\n        controls: isChannel ? true : controls,\n        time: parseStartTime(url),\n        ...config.options\n      })\n      const { READY, PLAYING, PAUSE, ENDED, ONLINE, OFFLINE, SEEK } = Twitch.Player\n      this.player.addEventListener(READY, this.props.onReady)\n      this.player.addEventListener(PLAYING, this.props.onPlay)\n      this.player.addEventListener(PAUSE, this.props.onPause)\n      this.player.addEventListener(ENDED, this.props.onEnded)\n      this.player.addEventListener(SEEK, this.props.onSeek)\n\n      // Prevent weird isLoading behaviour when streams are offline\n      this.player.addEventListener(ONLINE, this.props.onLoaded)\n      this.player.addEventListener(OFFLINE, this.props.onLoaded)\n    }, onError)\n  }\n\n  play () {\n    this.callPlayer('play')\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    this.callPlayer('pause')\n  }\n\n  seekTo (seconds) {\n    this.callPlayer('seek', seconds)\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction)\n  }\n\n  mute = () => {\n    this.callPlayer('setMuted', true)\n  }\n\n  unmute = () => {\n    this.callPlayer('setMuted', false)\n  }\n\n  getDuration () {\n    return this.callPlayer('getDuration')\n  }\n\n  getCurrentTime () {\n    return this.callPlayer('getCurrentTime')\n  }\n\n  getSecondsLoaded () {\n    return null\n  }\n\n  render () {\n    const style = {\n      width: '100%',\n      height: '100%'\n    }\n    return (\n      <div style={style} id={this.playerID} />\n    )\n  }\n}\n"],"sourceRoot":""}